# TCP

https://xiaolincoding.com/network/3_tcp/tcp_interview.html#tcp-%E5%9F%BA%E6%9C%AC%E8%AE%A4%E8%AF%86

TCP 可靠稳定传输：

1. **序列号和确认应答（ACK）**
   - 序列号：每个数据包都有一个唯一的序列号
   - ACK：接收方发送确认，表示已成功接收到特定序列号的数据
   - 作用：确保数据按正确顺序到达，检测丢失的数据包

2. **超时重传**
   - 机制：发送方为每个数据包设置一个计时器
   - 触发：如果在超时时间内未收到 ACK，则重新发送数据包
   - 自适应：根据网络状况动态调整超时时间

3. **滑动窗口**
   - 概念：允许发送多个未确认的数据包
   - 大小：接收方通告的窗口大小决定发送方可以发送的数据量
   - 优点：提高网络利用率，实现流量控制

4. **拥塞控制**
   - 慢启动：初始发送速率较低，逐渐增加
   - 拥塞避免：在达到阈值后，线性增加发送速率
   - 快重传：收到重复 ACK 时立即重传，不等待超时
   - 快恢复：在快重传后，将拥塞窗口减半而不是重新慢启动

5. **校验和**
   - 计算：对数据包内容进行校验和计算
   - 验证：接收方重新计算校验和并与收到的校验和比较
   - 目的：检测传输过程中的数据损坏

6. **连接管理**
   - 三次握手：建立连接时同步序列号，确保双方准备好通信
   - 四次挥手：优雅地关闭连接，确保双方都完成数据传输

7. **数据分段**
   - 过程：将大数据块分割成较小的段
   - 优点：便于管理、重传和适应网络的最大传输单元（MTU）

8. **重复数据检测**
   - 方法：通过序列号识别重复到达的数据包
   - 处理：丢弃重复的数据包，避免数据重复

9. **流量控制**
   - 机制：接收方通告自己的接收窗口大小
   - 目的：防止发送方发送速度过快，导致接收方缓冲区溢出

10. **延迟确认**
    - 原理：不立即发送 ACK，而是等待一段时间或累积多个数据包后再确认
    - 好处：减少网络中 ACK 的数量，提高效率

11. **Nagle 算法**
    - 功能：延迟发送小数据包，等待更多数据累积后一起发送
    - 目的：减少网络中小数据包的数量，降低网络负载

这些机制相互配合，共同确保了 TCP 在复杂的网络环境中能够提供可靠、有序、无差错的数据